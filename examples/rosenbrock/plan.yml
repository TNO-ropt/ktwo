anchors:
  steps: &steps
    - run: set
      with:
        everest_config[optimization][max_function_evaluations]: 2
        everest_config[controls][0][variables][3][max]: 100
    - run: parse_everest_config
      with:
        input: $everest_config
        output: ropt_config
    - run: optimizer
      with:
        config: $ropt_config
        tags: report
    - run: print
      with:
        message: |
          Optimal result:
            variables: ${{ $optimal_value.evaluations.variables }}
plan:
  inputs:
    - everest_config
  variables:
    ropt_config: null
    optimal_value: null
  steps: *steps
  results:
    - run: tracker
      with:
        tags: report
        var: optimal_value
